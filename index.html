<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="index,follow">
    <title>Proyecto OIT</title>

    <link rel="icon" href="IMG/logo_oit_pesta√±a.jpg">
    <!-- A√±adir el archivo CSS -->
    <link rel="stylesheet" href="css/OIT.css"> 
     
    <!-- A√±adir el CDN de Leaflet css-->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.8.0/dist/leaflet.css"
    integrity="sha512-hoalWLoI8r4UszCkZ5kL8vayOGVae1oxXe/2A4AO6J9+580uKHDO3JdHb7NzwwzK5xr/Fs0W40kiNHxM9vyTtQ=="
    crossorigin=""/>
    
    <!-- A√±adir CDN de JS -->
    <!-- CDN de Librer√≠a de JS versi√≥n 1.8 -->
    <script src="https://unpkg.com/leaflet@1.8.0/dist/leaflet.js"
    integrity="sha512-BB3hKbKWOc9Ez/TAwyWxNXeoV9c1v6FIeYiBieIWkpLjauysF18NzgR1MBNBXf8/KABdlkX68nAhlwcDFLGPCQ=="
    crossorigin=""></script>
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
 
    <!-- A√±adir libreria para opacidad de las capas -->
    <link rel="stylesheet" href="dist/L.Control.HtmlLegend.css" />
    <!-- Control de leyendas -->
    <script src="dist/L.Control.HtmlLegend.js"></script>

    <!-- A√±adir control de paneles y estilo -->
    <script src="js/leaflet-panel-layers.js"></script>
    <link rel="stylesheet" href="css/leaflet-panel-layers.css"/>
     <!-- a√±adir paquete para patrones de fondo -->
    <script src="js/leaflet.pattern-src.js"></script>
    <!-- a√±adir paquete para imprimir el mapa -->
    <script src="js/leaflet.browser.print.js"></script>
    <!-- a√±adir paquete para descagar el mapa -->
    <script src="dist/bundle.js"></script>
    <!-- A√±adir boostrap para botones -->
    <!-- <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css"> -->
</head>
<body>
     <!-- a√±adir archivo datos MIRTI Actualizados-->
     <script src="js/Datos_MIRTI_3_Provincias_Act.js"></script>
     <!-- a√±adir archivo de perfiles de productores -->
     <script src="js/Perfil_de_productor.js"></script>
     <!-- a√±adir archivo √°rea sembrada de Algod√≥n 2019-2020 -->
     <script src="js/Area Algodon_19_20.js"></script>
    <!-- A√±adir el GeoJson de desmotadoras -->
    <script src="js/Desmotadoras.js"></script>
    <div class="inicio">
        <img class="logoInicio" src="IMG/algodonPNG.png" alt="">
    </div>
     <div class="contenedor-principal">
        <div class="Titulo">SIG Cadena de Algod√≥n en Argentina</div>
        <a  class="OIT" href="https://www.ilo.org/global/lang--es/index.htm">
            <img  class="logo-OIT" src="IMG/Logo_OIT.png" alt="">
        </a>
    </div>  
    <!-- boton para imprimir mapa -->
    <center>
        <button id="imprimir-mapa" class="btn btn-primary hidden-print" onclick="myFunction()">üñ®</button>
   </center>
     <!-- Agregar el div del mapa -->
     <div class="contenedor-mapa" id="contenedor-mapa">
        <button id="btn-abrir-popup" class="btn-abrir-popup">‚Üπ</button>
         <div id="map"></div>
         <div class="overlay" id="overlay">
          <div class="popup-popup" id="popup-popup">
             <a href="#" id="btn-cerrar-popup" class="btn-cerrar-popup"><i class="x">X</i></a>
              <h3 class="h3">La cadena de valor del Algod√≥n en la Argentina</h3>
              <h1 class="texto-info">
                La cadena algodonera-textil argentina, se compone de una fase primaria de producci√≥n de
                algod√≥n y una fase industrial que se subdivide en tres segmentos: la producci√≥n de fibra, los
                manufacturados textiles - con sus tres productos: hilados, tejidos planos y tejidos de punto -
                y por √∫ltimo el segmento de confecciones e indumentaria. </h1>
                <h2 class="nivel-2">Etapas de la Producci√≥n de Algod√≥n</h2>
                <img class="IMG-CPA" src="IMG/leyenda_area_sembrada.jpg"></img>
                <h3 class="nivel-3">La producci√≥n de Algod√≥n en bruto</h3>
               <h1 class="texto-info">
               La fase primaria comprende el cultivo y la obtenci√≥n del algod√≥n en bruto o algod√≥n con semilla. 
               En Argentina, la regi√≥n algodonera se concentra principalmente entre los 25¬∫ y los 31¬∫ de latitud sur, con nuevas 
               √°reas de siembra hacia el norte y el sur de dichas latitudes. Las provincias que generan la mayor 
               producci√≥n del pa√≠s son: Santiago del Estero, Chaco, Santa Fe y Formosa, y en menor porcentaje Salta, 
               Corrientes, Catamarca, C√≥rdoba, Entre R√≠os y San Luis.</h1>
               <h1 class="texto-info">
               En la capa <p class="resaltar">densidad de lotes de algod√≥n </p> se observa la distribuci√≥n de lotes de algod√≥n en las provincias de Santa Fe, 
               Santiago del Estero y Chaco, en un radio de 50 km. En la provincia de Santa Fe la cuenca algodonera 
               se divide en dos sectores: al este; los departamentos General Obligado, San Javier y Vera y al oeste; el 
               departamento de 9 de Julio, siendo este √∫ltimo el principal departamento en la producci√≥n de algod√≥n de la provincia. 
               Por su parte, en Santiago del Estero se distinguen dos zonas productivas: al este la zona de secano  en donde 
               se encuentran grandes productores; que comprende los departamentos Alberdi, Moreno, Aguirre, Belgrano, General Taboada, 
               siendo en √©stos donde se produce entre el 60 y el 70% del algod√≥n de la provincia. En la zona oeste, se destaca la producci√≥n 
               </h1>

                <h1 class="texto-info">departamentos arrojan un riesgo promedio para Argentina a nivel departamental del 6,54%. Los departamentos
                con riesgo alto, mayor al 8,8%, son 51. En Argentina, seg√∫n el modelo, el riesgo de trabajo infantil y adolescente es:
                i) creciente con la edad de ni√±as, ni√±os y adolescentes (NNyA), ii) mayor en los varones, iii) aumenta para NNyA en
                hogares cuyo jefe es asalariado no registrado o es trabajador no asalariado en las zonas urbanas. Adem√°s, dentro de
                los factores de protecci√≥n, se encuentran: i) el mayor nivel de escolaridad del jefe del hogar, ii) la asistencia a la escuela
                de NNyA y iii) la cobertura de salud paga para NNyA.
                departamentos arrojan un riesgo promedio para Argentina a nivel departamental del 6,54%. Los departamentos
                con riesgo alto, mayor al 8,8%, son 51. En Argentina, seg√∫n el modelo, el riesgo de trabajo infantil y adolescente es:
                i) creciente con la edad de ni√±as, ni√±os y adolescentes (NNyA), ii) mayor en los varones, iii) aumenta para NNyA en
                hogares cuyo jefe es asalariado no registrado o es trabajador no asalariado en las zonas urbanas. Adem√°s, dentro de
                los factores de protecci√≥n, se encuentran: i) el mayor nivel de escolaridad del jefe del hogar, ii) la asistencia a la escuela
                de NNyA y iii) la cobertura de salud paga para NNyA.
                departamentos arrojan un riesgo promedio para Argentina a nivel departamental del 6,54%. Los departamentos
                con riesgo alto, mayor al 8,8%, son 51. En Argentina, seg√∫n el modelo, el riesgo de trabajo infantil y adolescente es:
                i) creciente con la edad de ni√±as, ni√±os y adolescentes (NNyA), ii) mayor en los varones, iii) aumenta para NNyA en
                hogares cuyo jefe es asalariado no registrado o es trabajador no asalariado en las zonas urbanas. Adem√°s, dentro de
                los factores de protecci√≥n, se encuentran: i) el mayor nivel de escolaridad del jefe del hogar, ii) la asistencia a la escuela
                de NNyA y iii) la cobertura de salud paga para NNyA.
                departamentos arrojan un riesgo promedio para Argentina a nivel departamental del 6,54%. Los departamentos
                con riesgo alto, mayor al 8,8%, son 51. En Argentina, seg√∫n el modelo, el riesgo de trabajo infantil y adolescente es:
                i) creciente con la edad de ni√±as, ni√±os y adolescentes (NNyA), ii) mayor en los varones, iii) aumenta para NNyA en
                hogares cuyo jefe es asalariado no registrado o es trabajador no asalariado en las zonas urbanas. Adem√°s, dentro de
                los factores de protecci√≥n, se encuentran: i) el mayor nivel de escolaridad del jefe del hogar, ii) la asistencia a la escuela
                de NNyA y iii) la cobertura de salud paga para NNyA.
                departamentos arrojan un riesgo promedio para Argentina a nivel departamental del 6,54%. Los departamentos
                con riesgo alto, mayor al 8,8%, son 51. En Argentina, seg√∫n el modelo, el riesgo de trabajo infantil y adolescente es:
                i) creciente con la edad de ni√±as, ni√±os y adolescentes (NNyA), ii) mayor en los varones, iii) aumenta para NNyA en
                hogares cuyo jefe es asalariado no registrado o es trabajador no asalariado en las zonas urbanas. Adem√°s, dentro de
                los factores de protecci√≥n, se encuentran: i) el mayor nivel de escolaridad del jefe del hogar, ii) la asistencia a la escuela
                de NNyA y iii) la cobertura de salud paga para NNyA.
              </h1>
          </div>
        </div>
     </div>
     
     <script>
        var controlCapas;
        $(document).ready(function () {
        // Agregar Google Hibrido como mapa base
        var osmLayer =  L.tileLayer('http://{s}.google.com/vt/lyrs=s,h&x={x}&y={y}&z={z}',{
            maxZoom: 18,
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            subdomains:['mt0','mt1','mt2','mt3']
        });
        //Agregar Open Street Map como mapa base
        var OSM = new L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',
        });
        
        // Fnci√≥n que hace zoom a cada evento al hacer click con el cursor
        function zoomToFeature(e) {
            map.fitBounds(e.target.getBounds());
        }
        // Funci√≥n para generar un cartel al posarce sobre el departamento
        function popUpfondo (feature, layer) {
            if (feature.properties && feature.properties.nam) {
                layer.bindTooltip("<b>" + feature.properties.nam + "</b>", {
                    interactive: true,
                    permanent: false,
                    fillopacity: 0.01,
                    direction: 'top',
                    className: 'popup',
                });
                layer.on({      
                    click: zoomToFeature
                });
            }
            
        }
        // Capa de fondo de departamentos
        var capa_fondo = L.geoJson(Algodon_19_20, {
            fillOpacity:0,
            color:'indigo',
            weight: 1,
            onEachFeature: popUpfondo,
        })
        
        // Generar Funci√≥n de colores para RTI
        function getColor(d) {
            return d == 1 ? '#fefefc' :
                   d == 2 ? '#00cfff' :
                   d == 3 ? '#2b83ba' :
                   '';
            
        }
        
        //Modificar el color de fonde en funci√≥n de la propiedad Riesgo de trabajo infantil
        function style1(feature) {
            return {
                fillColor: getColor(feature.properties.RTI),
                weight: 1,
                opacity: 0.5,
                color: 'white',
                dashArray: '3',
            };
        }
        
        // Funci√≥n para generar un cartel al posarce sobre el departamento
        function popUpInfo (feature, layer) {
            if (feature.properties && feature.properties.nam) {
                layer.bindTooltip("<b>" + feature.properties.nam + "</b>"+
                "<br> RTI: "+ feature.properties.RTI, {
                    interactive: true,
                    permanent: false,
                    fillopacity: 0.01,
                    direction: 'top',
                    className: 'popup',
                });
                layer.on({      
                    click: zoomToFeature
                });
            }
            
        }
        
        var datos_mirti = L.geoJson(Datos_MIRTI_act, {
            style: style1,
            onEachFeature: popUpInfo,
        });
        // ================= A√ëADIR √ÅREA SEMBRADA DE ALGOD√ìN EN DIFERENTES A√ëOS====================================
        // Funci√≥n para generar un cartel al posarce sobre el departamento
        function popUpInfoAlgodon (feature, layer) {
            if (feature.properties && feature.properties.nam) {
                layer.bindTooltip("<b>" + feature.properties.nam + "</b>"+
                "<br> √Årea Sembrada: "+ feature.properties.Area_Sem, {
                    interactive: true,
                    permanent: false,
                    fillopacity: 0.01,
                    direction: 'top',
                    className: 'popup',
                });
                layer.on({
                    click: zoomToFeature
                });
            }
        }
        // Generar Funci√≥n de colores para RTI
        function getColorAlgodon(d) {
            return d > 21021 ? '#672202' :
                   d > 11017 ? '#de001d' :
                   d > 6464  ? '#fc0800' :
                   d > 2500  ? '#f6755e' :
                   d > 0     ? '#f8c5c0' :
                   '#ffffff';
            
        }  
        
        //Modificar el color de fonde en funci√≥n de la propiedad Riesgo de trabajo infantil
        function styleAlgodon(feature) {
            return {
                fillColor: getColorAlgodon(feature.properties.Area_Sem),
                weight: 1,
                opacity: 0.5,
                color: 'white',
                dashArray: '3',
                fillOpacity: 1
            };
        }
        //A√±adir icono a cada desmotadora
        var redMarker = L.icon({
            color :'red',
            iconUrl:'IMG/algodonPNG.png',
            iconSize:[35,35]
        })
        // ================= A√ëADIR Nombre de las desmotadoras====================================
        // Funci√≥n para generar un cartel al posarce sobre el departamento
        function popUpInfoDes (feature, layer) {
            if (feature.properties && feature.properties.Nombre) {
                layer.bindTooltip("<b>" + feature.properties.Nombre + "</b>", {
                    interactive: true,
                    permanent: false,
                    fillopacity: 0.01,
                    direction: 'top',
                    className: 'popup',
                });
                layer.setIcon(redMarker, {opacity:0.01})
            }
        }
        
        //A√±adir la capa de desmotadoras 2021-2022
        var desmotadoras = L.geoJson(Desmotadoras, {
            onEachFeature: popUpInfoDes
        });
        
       
        // a√±adir √°rea sembrada de Algod√≥n 2019-2020 al mapa
        var algodon_19_20 = L.geoJson(Algodon_19_20, {
            style: styleAlgodon,
            onEachFeature: popUpInfoAlgodon,
        });
        // Generar Funci√≥n de colores para RTI
        function getColorperfPro(d) {
            return d > 4 ? '#672202' :
                   d > 3 ? '#de001d' :
                   d > 2  ? '#fc0800' :
                   d > 1  ? '#f6755e' :
                   d > 0     ? '#f8c5c0' :
                   '#ffffff';
            
        }  
        
        //Modificar el color de fonde en funci√≥n de la propiedad Riesgo de trabajo infantil
        function styleperfPro(feature) {
            return {
                fillColor: getColorperfPro(feature.properties.id),
                weight: 1,
                opacity: 0.5,
                color: 'white',
                dashArray: '3',
                fillOpacity: 1
            };
        }

     
        var map = L.map('map',{
            center: [-29.25,-61.43],
            zoom: 6,
            layers: [osmLayer,capa_fondo]
        });


    //    A√±adir las diferentes trama de fondo para cada
    //    Perfil de productores
        var stripes_1 = new L.StripePattern({
                                      angle: 45,
                                      weight: 2,
                                      color: 'black',
                                      opacity: 1,});
        stripes_1.addTo(map);
        var stripes_2 = new L.StripePattern({

                                      angle: 0,
                                      weight: 2,
                                      color: 'darkred',
                                      fillOpacity: 1,});
        stripes_2.addTo(map);
        var stripes_3 = new L.StripePattern({
                                      angle: 90,
                                      weight: 2,
                                      color: 'green',
                                      opacity: 1,});
        stripes_3.addTo(map);

        var perfilProductores = L.geoJson(perfilProductor,{
            style: function(feature){
                switch (feature.properties.id){
                    case 1 : return {fillPattern:stripes_1,
                    width:0.5,
                    color: 'black',
                    opacity:0,
                    fillOpacity: 0.75
                    };

                    case 2 : return {fillPattern: stripes_2,
                    width:0.5,
                    color: 'black',
                    opacity:0,
                    fillOpacity: 0.75
                    };

                    case 3 : return {fillPattern: stripes_3,
                    width: 0.5,
                    color: 'black',
                    opacity:0,
                    fillOpacity: 0.75
                    };
                }

            }
        });
        
        // Hacer un diccionario con los mapa base que podemos usar
        var baseMaps = [{
            group:"Mapa base",
            layers:[{
                name: "Google HYBRID",
                layer: osmLayer},
                {name:"Open Street Map",
                layer: OSM}
            ]
        }];
        // Unir las capas que pretendemos controlar mediante la funci√≥n L.control.layers()
        var capas = [{
            group:"Capas del Proyecto",
            layers:[{
            name:'Departamentos', 
            layer: capa_fondo},
            {name:'Datos MIRTI',
            layer: datos_mirti},
            {name:'Algod√≥n 19-20',
            layer: algodon_19_20},
            {name: 'Desmotadoras',
            layer: desmotadoras},
            {name:'Perfil de Productor',
             layer:perfilProductores}
            ]
        }];
        
        controlCapas = L.control.panelLayers(baseMaps, capas,
                {
                  compact: true,
                  collapsed: true ,
                  collapsibleGroups: true, 
                });
            // A√±adimos el control de opacidad de las capas
            var layer1 = L.control.htmllegend({
              position: 'bottomright',
              legends: [{
                name: "<center>"+'Tipolog√≠a de productores'+"<br>"+'por regi√≥n'+"<\center>",
                layer: perfilProductores,
                elements: [{
                    label: 'Zona de riego de Santiago del Estero',
                    html: '<img src="IMG/img_Region1.png"><\img>',
                    style: {
                        'width': '30px',
                        'height': '30px'
                    }
                }, {
                    label: 'Zona de secano de Santiago del Estero',
                    html: '<img src="IMG/img_Region2.png"><\img>',
                    style: {
                        'background-color': 'lightblue',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: 'Zona oeste de Santa Fe',
                    html: '<img src="IMG/img_Region3.png"><\img>',
                    style: {
                        'background-color': 'white',
                        'width': '30px',
                        'height': '30px'
                    }
                }
            ]
             }],
             collapseSimple: true,
             detectStretched: true,
             collapsedOnInit: true,
             defaultOpacity: 0.7,
             visibleIcon: 'icon icon-eye',
             hiddenIcon: 'icon icon-eye-slash',
             updateOpacity: function (layer, opacity) {
                    layer.setStyle({fillOpacity: opacity })
                }
        })
        map.addControl(layer1)
            // A√±adimos el control de opacidad de las capas
    var layer1 = L.control.htmllegend({
              position: 'bottomright',
              legends: [{
                name: "<center>"+'Riesgo de trabajo infantil'+"<br>"+'y adolescente'+"<\center>",
                layer: datos_mirti,
                elements: [{
                    label: 'Alto Riesgo',
                    html: '',
                    style: {
                        'background-color': '#2B83BA',
                        'width': '30px',
                        'height': '30px'
                    }
                }, {
                    label: 'Medio Riesgo',
                    html: '',
                    style: {
                        'background-color': '#00CFFF',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: 'Bajo Riesgo',
                    html: '',
                    style: {
                        'background-color': 'white',
                        'width': '30px',
                        'height': '30px'
                    }
                }
            ]
             }],
             collapseSimple: true,
             detectStretched: true,
             collapsedOnInit: true,
             defaultOpacity: 0.7,
             visibleIcon: 'icon icon-eye',
             hiddenIcon: 'icon icon-eye-slash',
             updateOpacity: function (layer, opacity) {
                    layer.setStyle({fillOpacity: opacity })
                }
        })
        map.addControl(layer1)
        
              // A√±adimos el control de opacidad de las capas producci√≥n de algod√≥n
        var layer2 = L.control.htmllegend({
              position: 'bottomright',
              legends: [{
                name: "<center>"+'√Årea sembrada de algod√≥n'+"<br>"+'por departamento'+"<\center>",
                layer: algodon_19_20,
                elements: [{
                    label: '0.0 - 0.0',
                    html: '',
                    style: {
                        'background-color': '#FFFFFF',
                        'width': '30px',
                        'height': '30px'
                    }
                }, {
                    label: '0.0 - 2500',
                    html: '',
                    style: {
                        'background-color': '#F8C5C1',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: '2500 - 6464',
                    html: '',
                    style: {
                        'background-color': '#F47660',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: '6464 - 11817',
                    html: '',
                    style: {
                        'background-color': '#FB0800',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: '11817 - 21020',
                    html: '',
                    style: {
                        'background-color': '#DF001F',
                        'width': '30px',
                        'height': '30px'
                    }
                },{
                    label: '21020 - 33008',
                    html: '',
                    style: {
                        'background-color': '#662202',
                        'width': '30px',
                        'height': '30px'
                    }
                }
            ]
             }],
             collapseSimple: true,
             detectStretched: true,
             collapsedOnInit: true,
             defaultOpacity: 0.7,
             visibleIcon: 'icon icon-eye',
             hiddenIcon: 'icon icon-eye-slash',
             updateOpacity: function (layer, opacity) {
                    layer.setStyle({fillOpacity: opacity , defaultOpacity:opacity})
                }
        })
         // A√±adir script de descarga del archivo
         var printer = L.easyPrint({
      		tileLayer: osmLayer,
      		sizeModes: ['Current', 'A4Landscape', 'A4Portrait'],
      		filename: 'myMap',
      		exportOnly: true,
      		hideControlContainer: true
		});
        
        map.addControl(layer2)
        controlCapas.addTo(map)    
    });
        
    </script>
   
     <!-- A√±ade el archivo JS -->
     <script src="js/OIT.js"></script> 
     
</body>
</html>